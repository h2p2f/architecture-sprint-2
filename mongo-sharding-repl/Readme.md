# Шардирование и репликация в MongoDB

## Задание
Изобразите, как реализуете репликацию MongoDB для повышения отказоустойчивости. 
Чтобы это сделать, скопируйте первый вариант схемы и доработайте его таким образом, 
чтобы для каждого шарда была настроена репликация. Каждый шард должен иметь по три реплики.

## Схема решения

![Schema](./images/step2.png "shema")

## Решение
Система сконфигурирована в docker-compose.yaml

Сервер конфигурации 10.0.0.2:27019

Шарды 10.0.0.3:27018 ... 10.0.0.8:27018

Роутер mongo 10.0.0.9:27017

Приложение pymongo-api 10.0.0.10


## Запуск

```shell
make up
```
## Инициализация
```shell
make init
```
## Остановка
```shell
make down
```

## Как проверить

### Если вы запускаете проект на локальной машине

Откройте в браузере http://localhost:8080

### Если вы запускаете проект на предоставленной виртуальной машине

Узнать белый ip виртуальной машины

```shell
curl --silent http://ifconfig.me
```

Откройте в браузере http://<ip виртуальной машины>:8080

## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://<ip виртуальной машины>:8080/docs